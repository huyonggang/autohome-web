!function(){function t(t,n,i){function o(){n.Log.d("init"),n.Log.d(n.Data.get("aid")),n.Api.getAllAdminAdvertising().then(function(t){n.Log.d(t),r.itemList=t.data})}function e(t){}function a(t){swal({title:"您确定要删除这条信息吗",text:"删除后将无法恢复，请谨慎操作！",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"删除",closeOnConfirm:!1},function(){n.Api.deleteAdminAdvertising(n.Data.get("aid"),t.id).then(function(i){if(0==i.status){for(var o=0;o<r.itemList.length;o++)r.itemList[o].id==t.id&&r.itemList.splice(o,1);swal("删除成功！","您已经永久删除了这条信息。","success")}else n.Notify.info("删除失败")})})}function d(){n.Api.addAdminAdvertising(n.Data.get("aid"),r.title,s,r.city,r.url).then(function(t){0==t.status?o():n.Notify.info("添加失败")})}function c(){r.company="",r.discount=""}function e(){n.Api.updateAdminAdvertising(n.Data.get("aid"),u.id,r.title,s,r.city,r.url).then(function(t){0==t.status?o():n.Notify.info("更新失败")})}function l(t){u=t,r.city=t.city,r.title=t.context,r.url=t.url,r.src=n.Const.NET.IMG_RUL+t.picture}var u,r=t;r.onDelete=a,r.onAdd=d,r.showAddDialog=c,r.onUpdate=e,r.onSelect=l;var s;o(),t.uploadImg="",r.upload=function(t){i.upload({url:n.Const.NET.IMG_UPLOAD,data:{file:t}}).then(function(t){var i=t.data;s=i.data.fileName,r.src=n.Const.NET.IMG_RUL+s,n.Log.d(i)},function(t){n.Log.d("error"),n.Log.d(t)},function(t){var i=parseInt(100*t.loaded/t.total);console.log("progress: "+i+"% "),n.Log.d(t)})}}angular.module("app").controller("advertising.ManageController",["$scope","Core","Upload",t])}();
!function(){function a(a,o,e){function t(){console.log("getUserDetail"),o.Api.getUserOilcardByUid(n).then(function(a){if(o.Log.d(a),a.data){i.oilCards=a.data.oilcard;var e=a.data.user;e&&(i.name=e.uname,i.phone=e.uphone,i.plate=e.uemail)}})}o.Log.d("init"),o.Log.d(e.data);var n=e.data,i=a;t()}angular.module("app").controller("company.DetailController",["$scope","Core","$stateParams",a])}();
!function(){function t(t,n){function a(){n.Log.d("init"),n.Api.queryAllUser(1,u,l).then(function(t){if(0==t.status){var a=t.data.count;e(a),n.Log.d(t),c.itemList=t.data.data}else n.Notify.info("获取用户失败")})}function o(t){n.Log.d("select company"+t),n.go("admin.company-detail",t)}function i(){n.Api.queryUser(1,c.search).then(function(t){n.Log.d(t),0==t.status&&(t.data?(c.itemList=[],c.itemList.push(t.data.data)):n.Notify.info("未找到用户"))})}function e(t){$("#callBackPager").extendPagination({totalCount:t,showCount:10,limit:10,callback:function(t,a,o){n.Log.d("totalCount "+o),n.Api.queryAllUser(1,t,a).then(function(t){0==t.status&&(n.Log.d(t),c.itemList=t.data.data)})}})}var c=t,u=1,l=10;c.onSelect=o,c.onSearch=i,c.itemList=[],a()}angular.module("app").controller("company.ManageController",["$scope","Core",t])}();
!function(){function t(t,i){function n(){i.Log.d("init"),i.Log.d(i.Data.get("aid")),i.Api.getAllAdminOilcardtype().then(function(t){i.Log.d(t),u.itemList=t.data})}function o(t){}function e(t){swal({title:"您确定要删除这条信息吗",text:"删除后将无法恢复，请谨慎操作！",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"删除",closeOnConfirm:!1},function(){i.Api.deleteAdminOilcardtypeById(i.Data.get("aid"),t.id).then(function(n){if(0==n.status){for(var o=0;o<u.itemList.length;o++)u.itemList[o].id==t.id&&u.itemList.splice(o,1);swal("删除成功！","您已经永久删除了这条信息。","success")}else i.Notify.info("删除失败")})})}function a(){i.Api.saveAdminOilcardtype(i.Data.get("aid"),u.company,u.discount).then(function(t){0==t.status?n():i.Notify.info("添加失败")})}function c(){u.company="",u.discount=""}function o(){i.Api.updateAdminOilcardtype(i.Data.get("aid"),l.id,u.title,u.discount).then(function(t){0==t.status?n():i.Notify.info("更新失败")})}function d(t){u.updateDialog=!0,l=t,u.title=l.oilcardname}var l,u=t;u.onDelete=e,u.onAdd=a,u.showAddDialog=c,u.onUpdate=o,u.onSelect=d,n()}angular.module("app").controller("discount.ManageController",["$scope","Core",t])}();
!function(){function e(e,t,a){function A(){v.showDetail=!1}function n(){v.leaveStat={},v.reimbStat={},v.tripStat={},v.leaveData=[],v.tripData=[],v.reimbData=[],v.reimbDataY=[],v.leaveDataY=[],v.tripDataY=[],v.showDetail=!1}function i(){a.publish("init-chart",{x:v.leaveData,y:v.leaveDataY,type:a.Const.APP.TYPE.TYPE_ADMIN_LEAVE})}function o(){a.publish("init-chart",{x:v.reimbData,y:v.reimbDataY,type:a.Const.APP.TYPE.TYPE_FIN_REIMB})}function P(){a.publish("init-chart",{x:v.tripData,y:v.tripDataY,type:a.Const.APP.TYPE.TYPE_WORK_BUSINESS})}function _(e,t,a,n){switch(e){case-1:A(),m(t,a,!1,n);break;case 0:A();break;case 1:A(),E(t,a,!1,n)}}function r(e){v.clickItem=v.apvList[e].data,v.showDetail=!0}function c(){a.Api.APV_MANAGE.getApvManageApprovePendingList(v.company.id,"",1).then(function(e){if(0==e.code){var t=e.data.approve_pending_list;v.apvList=p(t)}},function(e){})}function p(e){var t=[];for(var A in e){var n={};switch(n.userName=v.user.name,n.status=" 待审批",n.creatTime=a.Util.timeFormat(e[A].create_time),n.data=e[A],n.id=e[A].id,e[A].apv_type){case a.Const.APP.APV_MANAGE.APV_TYPE_TEMPLATE:n.name=e[A].template.name,n.type=999;break;case a.Const.APP.APV_MANAGE.APV_TYPE_ADMIN_LEAVE:n.name="请假",n.type=1;break;case a.Const.APP.APV_MANAGE.APV_TYPE_FIN_PAY:n.name="支付",n.type=2;break;case a.Const.APP.APV_MANAGE.APV_TYPE_FIN_REIMB:n.name="报销",n.type=3;break;case a.Const.APP.APV_MANAGE.APV_TYPE_HR_RECRUITMENT:n.name="招募";break;case a.Const.APP.APV_MANAGE.APV_TYPE_WORK_BUSINESS:n.name="外勤",n.type=5;break;case a.Const.APP.APV_MANAGE.APV_TYPE_FIN_FUND:n.name="备用金申请",n.type=6;break;case a.Const.APP.APV_MANAGE.APV_TYPE_ADMIN_RES:n.name="";break;case a.Const.APP.APV_MANAGE.APV_TYPE_ADMIN_RES_GOODS:n.name="物品申领",n.type=8;break;case a.Const.APP.APV_MANAGE.APV_TYPE_ADMIN_RES_STAMP:n.name="用印申请",n.type=9;break;case a.Const.APP.APV_MANAGE.APV_TYPE_ADMIN_RES_CAR:n.name="用车申请",n.type=10;break;case a.Const.APP.APV_MANAGE.APV_TYPE_CARD:n.name="名片申请",n.type=11;break;case a.Const.APP.APV_MANAGE.APV_TYPE_CONTRACT:n.name="合同",n.type=12;break;case a.Const.APP.APV_MANAGE.APV_TYPE_TRAIN:n.name="培训",n.type=13;break;case a.Const.APP.APV_MANAGE.APV_TYPE_REPORT:n.name="报告",n.type=14;break;case a.Const.APP.APV_MANAGE.APV_TYPE_FIN_TRIP_REIMB:n.name="差旅费",n.type=15}if(t.push(n),A>=4)break}return t}function s(e){if(v.showDetail=!0,10999==e.itemType||999==e.itemType)v.clickItem=e.apvItem,v.clickItem.apv_type=999;else{var t={};t.isHome=!0,e.apvItem.apv?(t.org_id=e.apvItem.apv.org_id,t.id=e.apvItem.apv.id,t.org_root_id=e.apvItem.apv.org_root_id,v.clickItem=t,v.clickItem.apv_type=e.apvItem.apv.apv_type):(t.org_id=e.apvItem.org_id,t.id=e.apvItem.id,t.org_root_id=e.apvItem.org_root_id,v.clickItem=t,v.clickItem.apv_type=e.apvItem.apv_type)}}function E(e,t,A,n,i){A&&i.stopPropagation(),a.Api.APV_MANAGE.permitApv(e,N,t,n,"同意").then(function(e){0==e.code&&(v.onItem=!1,v.onApprove=!1,c(),a.Notify.success("操作成功"))},function(e){a.Notify.error("操作失败")})}function m(e,t,A,n,i){A&&i.stopPropagation(),a.Api.APV_MANAGE.rejectApv(e,N,t,n,"不同意").then(function(e){0==e.code&&(v.onItem=!1,v.onApprove=!1,c(),a.Notify.success("操作成功"))},function(e){a.Notify.error("操作失败")})}var v=t;v.user=a.Data.getUser(),v.user.avatar=a.Data.getAvatar(v.user.avatar),v.onClickCell=r,v.onClickBackground=A,v.onClickBtn=_,v.onClickPermit=E,v.onClickReject=m,v.onClickLeave=i,v.onClickTrip=P,v.onClickReimb=o,v.isShowNotify=!1;v.onClickDetail=s,a.on(a.Const.EVENT.EVENT_ORG_CHANGE,function(e,t){n()});var N;n()}angular.module("app").controller("adminHome",["$q","$scope","Core",e])}();
!function(){function t(t,o){function n(){o.Log.d("init"),o.Api.getUserInvoiceList(s,u,c).then(function(t){if(o.Log.d(t),0==t.status){o.Log.d(t),t.data.data&&a(t.data.data);var n=t.data.count;i(n)}else o.Notify.info("获取失败")})}function a(t){for(var o=0;o<t.length;o++)0==t[o].status?t[o].status="未开":1==t[o].status?t[o].status="已开":2==t[o].status&&(t[o].status="拒开");e.itemList=t}function i(t){$("#callBackPager").extendPagination({totalCount:t,showCount:10,limit:10,callback:function(t,n,i){o.Log.d("totalCount "+i),o.Api.getUserInvoiceList(s,t,n).then(function(t){o.Log.d(t),0==t.status?(o.Log.d(t),t.data.data&&a(t.data.data)):o.Notify.info("获取失败")})}})}var e=t,u=1,c=8,s=0;e.group=!0,e.itemList=[],n(),e.rechargeSuccess=function(t){o.Log.d("Success"),o.Api.updateUserInvoiceStatus(o.Data.get("aid"),t.id,1).then(function(t){0==t.status?(o.Notify.info("操作成功"),n()):o.Notify.info("操作失败")})},e.rechargeError=function(t){o.Log.d("Success"),o.Api.updateUserInvoiceStatus(o.Data.get("aid"),t.id,2).then(function(t){0==t.status?(o.Notify.info("操作成功"),n()):o.Notify.info("操作失败")})},e.check0=function(){s=0,e.group=!0,n()},e.check1=function(){s=1,e.group=!1,n()},e.check2=function(){s=2,e.group=!1,n()}}angular.module("app").controller("invoice.ManageController",["$scope","Core",t])}();
!function(){function a(a,t,e){function n(){console.log("getUserDetail"),t.Api.getMerchantBankCard(r).then(function(a){if(t.Log.d(a),a.data){o.bankCards=a.data.merchantbankcard,o.goods=a.data.merchantgoods;var e=a.data.merchant;e&&(o.name=e.mname,o.tel=e.tel,o.address=e.maddress,o.logo=t.Const.NET.IMG_RUL+e.mavitor,o.license=t.Const.NET.IMG_RUL+e.businesslicense)}})}var o=a;t.Log.d("init"),t.Log.d(e.data);var r=e.data;n()}angular.module("app").controller("merchant.DetailController",["$scope","Core","$stateParams",a])}();
!function(){function a(a,t){function n(){t.Log.d("init"),t.Api.queryAllMerchant(i,l).then(function(a){if(t.Log.d(a),0==a.status){if(a.data.data){for(var n=0;n<a.data.data.length;n++)"[]"==a.data.data[n].tel&&(a.data.data[n].tel="无");d.itemList=a.data.data}var e=a.data.count;o(e)}else t.Notify.info("获取商户失败")})}function e(a){t.Log.d("select mer"+a),t.go("admin.merchant-detail",a)}function o(a){$("#callBackPager").extendPagination({totalCount:a,showCount:10,limit:10,callback:function(a,n,e){t.Log.d("totalCount "+e),t.Api.queryAllMerchant(a,n).then(function(a){if(t.Log.d(a),0==a.status){if(a.data.data){for(var n=0;n<a.data.data.length;n++)"[]"==a.data.data[n].tel&&(a.data.data[n].tel="无");d.itemList=a.data.data}}else t.Notify.info("获取商户失败")})}})}var d=a,i=1,l=10;d.onSelect=e,n(),d.onSearch=function(){t.Api.queryMerchantByName(d.name,1,1).then(function(a){if(t.Log.d(a),0==a.status){if(a.data.data){for(var n=0;n<a.data.data.length;n++)"[]"==a.data.data[n].tel&&(a.data.data[n].tel="无");d.itemList=a.data.data}var e=a.data.count;o(e)}else t.Notify.info("获取商户失败")})}}angular.module("app").controller("merchant.ManageController",["$scope","Core",a])}();
!function(){function t(t,i){function n(){i.Log.d("init"),i.Log.d(i.Data.get("aid")),i.Api.getAllAdminGoods().then(function(t){i.Log.d(t),0==t.status?t.data&&d(t.data):i.Notify.info("更新失败")})}function e(t){}function o(t){swal({title:"您确定要删除这条信息吗",text:"删除后将无法恢复，请谨慎操作！",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"删除",closeOnConfirm:!1},function(){i.Api.deleteAdminGoods(i.Data.get("aid"),t.typeid).then(function(i){if(0==i.status){for(var n=0;n<f.itemList.length;n++)f.itemList[n].typeid==t.typeid&&f.itemList.splice(n,1);swal("删除成功！","您已经永久删除了这条信息。","success")}})})}function a(){i.Api.addAdminGoods(i.Data.get("aid"),f.name,f.price,f.notice).then(function(t){0==t.status?n():i.Notify.info("添加失败")})}function s(){f.name="",f.price="",f.notice=""}function e(){i.Api.updateAdminGoods(i.Data.get("aid"),r.typeid,f.title,f.price,f.notice).then(function(t){0==t.status?n():i.Notify.info("更新失败")})}function c(t){f.updateDialog=!0,r=t,f.title=r.typename,f.price=r.typeprice,f.notice=r.notice}function d(t){for(var i=0;i<t.length;i++)0==t[i].isrise?t[i].isrise="持平":1==t[i].isrise?t[i].isrise="上涨":t[i].isrise==-1&&(t[i].isrise="下调");f.itemList=t}var r,f=t;f.onDelete=o,f.onAdd=a,f.showAddDialog=s,f.onUpdate=e,f.onSelect=c,n()}angular.module("app").controller("oil-manager.ManageController",["$scope","Core",t])}();
!function(){function t(t,a){function i(){a.Log.d("init"),a.Api.getUserOilcardSerialList(u,r,s).then(function(t){if(a.Log.d(t),0==t.status){a.Log.d(t),t.data.data&&n(t.data.data);var i=t.data.count;e(i)}else a.Notify.info("获取失败")})}function n(t){for(var a=0;a<t.length;a++)1==t[a].status?t[a].status="未充值":2==t[a].status&&(t[a].status="充值成功");c.itemList=t}function e(t){$("#callBackPager").extendPagination({totalCount:t,showCount:10,limit:10,callback:function(t,i,e){a.Api.getUserOilcardSerialList(u,t,i).then(function(t){a.Log.d(t),0==t.status?(a.Log.d(t),t.data.data&&n(t.data.data)):a.Notify.info("获取失败")})}})}var o,c=t,r=1,s=10,u=1;c.itemList=[],i(),c.rechargeSuccess=function(t){a.Log.d("Success"),a.Api.updateUserOilcardSerialById(t.id,a.Data.get("aid")).then(function(t){0==t.status?(a.Notify.info("操作成功"),i()):a.Notify.info("操作失败")})},c.rechargeError=function(t){},c.check2=function(){u=2,c.isRecharge=!0,i()},c.check1=function(){u=1,c.isRecharge=!1,i()},c.selectItem=function(t){o=t},c.onRemark=function(){a.Log.d("Success"),a.Api.updateUserOilcardSerialRemarkById(o.id,a.Data.get("aid"),c.remark).then(function(t){0==t.status?(a.Notify.info("操作成功"),i()):a.Notify.info("操作失败")})}}angular.module("app").controller("recharge.ManageController",["$scope","Core",t])}();
!function(){function a(a,e,o){function t(){console.log("getUserDetail"),e.Api.getUserOilcardByUid(n).then(function(a){if(e.Log.d(a),a.data){r.oilCards=a.data.oilcard;var o=a.data.user;o&&(r.name=o.uname,r.phone=o.uphone,r.plate=o.uemail)}})}e.Log.d("init"),e.Log.d(o.data);var n=o.data,r=a;t()}angular.module("app").controller("user.DetailController",["$scope","Core","$stateParams",a])}();
!function(){function t(t,n){function a(){n.Log.d("init"),n.Api.queryAllUser(0,s,c).then(function(t){if(0==t.status){var a=t.data.count;e(a),n.Log.d(t),u.itemList=t.data.data}else n.Notify.info("获取用户失败")})}function o(t){n.Log.d("select user"+t),n.go("admin.user-detail",t)}function i(){n.Api.queryUser(0,u.search).then(function(t){n.Log.d(t),0==t.status&&(t.data?(u.itemList=[],u.itemList.push(t.data.data)):n.Notify.info("未找到用户"))})}function e(t){$("#callBackPager").extendPagination({totalCount:t,showCount:10,limit:10,callback:function(t,a,o){n.Log.d("totalCount "+o),n.Api.queryAllUser(0,t,a).then(function(t){0==t.status&&(n.Log.d(t),u.itemList=t.data.data)})}})}var u=t,s=1,c=10;u.onSelect=o,u.onSearch=i,u.itemList=[],a()}angular.module("app").controller("user.ManageController",["$scope","Core",t])}();
!function(){function t(t,n,i){function o(){n.Log.d("init"),n.Log.d(n.Data.get("aid")),n.Api.getAllAdminAdvertising().then(function(t){n.Log.d(t),r.itemList=t.data})}function e(t){}function a(t){swal({title:"您确定要删除这条信息吗",text:"删除后将无法恢复，请谨慎操作！",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"删除",closeOnConfirm:!1},function(){n.Api.deleteAdminAdvertising(n.Data.get("aid"),t.id).then(function(i){if(0==i.status){for(var o=0;o<r.itemList.length;o++)r.itemList[o].id==t.id&&r.itemList.splice(o,1);swal("删除成功！","您已经永久删除了这条信息。","success")}else n.Notify.info("删除失败")})})}function d(){n.Api.addAdminAdvertising(n.Data.get("aid"),r.title,s,r.city,r.url).then(function(t){0==t.status?o():n.Notify.info("添加失败")})}function c(){r.company="",r.discount=""}function e(){n.Api.updateAdminAdvertising(n.Data.get("aid"),u.id,r.title,s,r.city,r.url).then(function(t){0==t.status?o():n.Notify.info("更新失败")})}function l(t){u=t,r.city=t.city,r.title=t.context,r.url=t.url,r.src=n.Const.NET.IMG_RUL+t.picture}var u,r=t;r.onDelete=a,r.onAdd=d,r.showAddDialog=c,r.onUpdate=e,r.onSelect=l;var s;o(),t.uploadImg="",r.upload=function(t){i.upload({url:n.Const.NET.IMG_UPLOAD,data:{file:t}}).then(function(t){var i=t.data;s=i.data.fileName,r.src=n.Const.NET.IMG_RUL+s,n.Log.d(i)},function(t){n.Log.d("error"),n.Log.d(t)},function(t){var i=parseInt(100*t.loaded/t.total);console.log("progress: "+i+"% "),n.Log.d(t)})}}angular.module("app").controller("version.ManageController",["$scope","Core","Upload",t])}();
!function(){function a(a,n){var e=a;n.publish(n.Const.DATA.KEY_DEFAULT_NAVIGATION,"withdraw"),e.itemList=[{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"},{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"},{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"},{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"},{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"},{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"},{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"},{id:"",bankcard:"6228480402564890018 ",bankname:"中国银行",name:"张三",money:"300.00",status:"提现成功"}]}angular.module("app").controller("withdraw.ManageController",["$scope","Core",a])}();
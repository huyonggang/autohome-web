angular.module("templates").run(["$templateCache",function(n){n.put("core/navigation/setting-bar.html",'<div class="component-process-menu task-holder">\n\n    <div class="menu-sub-title m-link" href="javascript:;" ng-click="onClickProcessMenu()">\n        <div class="process-menu-other-holder">\n            <span class="defaule-title" style="font-weight: 500">流程设置</span>\n            <img class="icon-right" src="asset/core/component/setting-bar/img/icon-bottom.png">\n        </div>\n    </div>\n\n    <div class="menu-sub-title-holder" ng-show="context.showIndex||$state.includes(\'setting.index\')">\n        <div ng-repeat="item in defaultItems" class="menu-sub-other-title m-link"\n             ng-class="{\'checked-true\':item.isChecked&&$state.includes(\'setting.index\')}"\n             ng-click="onClickMenu(item,0)">\n            <div class="apv-menu-holder">\n                <!--<img class="menu-icon" ng-src="{{item.icon}}"/>-->\n                <span class="menu-title">{{item.title}}审批流程</span>\n            </div>\n        </div>\n        <div class="menu-sub-other-title m-link" ng-click="onClickSystemAPv()">\n            <div class="apv-menu-other-holder">\n                <!--<img class="menu-icon" ng-src="process-setting/img/icon-system.png"/>-->\n                <span class="menu-title">系统审批</span>\n                <img class="icon-bottom" src="asset/core/component/setting-bar/img/icon-bottom.png">\n            </div>\n        </div>\n        <div ng-show="context.showNormal" ng-repeat="item in menuItems" class="menu-sub-title m-link "\n             ng-class="{\'checked-true\':item.isChecked&&$state.includes(\'setting.index\')}"\n             ng-click="onClickMenu(item,1)">\n            <div class="apv-menu-holder">\n                <img class="menu-icon" ng-src="{{item.icon}}"/>\n                <span class="menu-title">{{item.title}}</span>\n            </div>\n        </div>\n        <div class="menu-sub-other-title m-link" ng-click="onClickCustomApv()" ng-if="moduleList.length > 0">\n            <div class="apv-menu-other-holder">\n                <!--<img class="menu-icon" ng-src="process-setting/img/icon-module.png"/>-->\n                <span class="menu-title">自定义审批</span>\n                <img class="icon-bottom" src="asset/core/component/setting-bar/img/icon-bottom.png">\n            </div>\n        </div>\n        <div ng-show="context.showModule" ng-repeat="item in moduleList" class="menu-sub-title m-link checked-{{item.isChecked}}" ng-click="onClickMenu(item,2)">\n            <div class="apv-menu-holder">\n                <img class="menu-icon" ng-src="{{item.img}}"/>\n                <span class="menu-title">{{item.title}}</span>\n            </div>\n        </div>\n    </div>\n\n    <div class="menu-sub-title menu-default m-link" href="javascript:;"\n         ng-class="{\'checked-true\':$state.includes(\'setting.auth\')}" ng-click="onClickAuth()">\n        <div class="process-menu-holder">\n            <span class="defaule-title" style="font-weight: 500">权限设置</span>\n        </div>\n    </div>\n    <div class="menu-sub-title menu-default m-link" href="javascript:;"\n         ng-click="onClickModule()">\n        <div class="process-menu-other-holder">\n            <span class="defaule-title" style="font-weight: 500">板块设置</span>\n            <img class="icon-right" src="asset/core/component/setting-bar/img/icon-bottom.png">\n        </div>\n    </div>\n\n    <div ng-show="context.showSpecial||$state.includes(\'setting.trip-reimb\')||$state.includes(\'setting.card\')||$state.includes(\'setting.module\')" class="menu-sub-title-holder" ng-click="onClickModule()">\n        <div class="menu-sub-other-title m-link menu-default">\n            <div class="apv-menu-other-holder">\n                <!--<img class="menu-icon" ng-src="process-setting/img/icon-system.png"/>-->\n                <span class="menu-title">系统审批</span>\n                <img class="icon-bottom" src="asset/core/component/setting-bar/img/icon-bottom.png">\n            </div>\n        </div>\n        <div class="menu-sub-title m-link menu-default" ng-class="{\'checked-true\':context.isContractChecked&&$state.includes(\'setting.module\')}" ng-click="onClickContract()">\n            <div class="apv-menu-holder">\n                <img class="menu-icon" ng-src="process-setting/img/icon-process-contract.png"/>\n                <span class="menu-title">合同</span>\n            </div>\n        </div>\n        <div class="menu-sub-title m-link menu-default" ng-class="{\'checked-true\':context.isTrainChecked&&$state.includes(\'setting.module\')}"\n             ng-click="onClickTrain()">\n            <div class="apv-menu-holder">\n                <img class="menu-icon" ng-src="process-setting/img/icon-process-train.png"/>\n                <span class="menu-title">培训</span>\n            </div>\n        </div>\n        <div class="menu-sub-title m-link menu-default" ui-sref="setting.card" ng-class="{\'checked-true\':context.isCardChekced&&$state.includes(\'setting.card\')}"\n             ng-click="onClickCard()">\n            <div class="apv-menu-holder">\n                <img class="menu-icon" ng-src="process-setting/img/icon-process-card.png"/>\n                <span class="menu-title">名片</span>\n            </div>\n        </div>\n        <div class="menu-sub-title m-link menu-default" ui-sref="setting.trip-reimb" ng-class="{\'checked-true\':$state.includes(\'setting.trip-reimb\')}">\n            <div class="apv-menu-holder">\n                <img class="menu-icon" ng-src="process-setting/img/icon-process-trip-reimb.png"/>\n                <span class="menu-title">差旅费</span>\n            </div>\n        </div>\n    </div>\n\n\n\n    <div class="menu-sub-title menu-default m-link" ui-sref="setting.moduleList" href="javascript:;"\n         ng-class="{\'checked-true\':$state.includes(\'setting.moduleList\')}"\n         ng-click="onClickModuleList()">\n        <div class="process-menu-holder">\n            <span class="defaule-title" style="font-weight: 500">自定义审批设置</span>\n        </div>\n    </div>\n</div>')}]);
!function(){function e(e,t){function s(){for(var t=0;t<e.menuItems.length;t++)e.menuItems[t].isChecked=!1;if(e.moduleList)for(var s=0;s<e.moduleList.length;s++)e.moduleList[s].isChecked=!1;e.defaultItems[0].isChecked=!1,a.isContractChecked=!1,a.isTrainChecked=!1}function o(){if(t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM))if(t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).value){a.showIndex=!0;for(var o=t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).value,i=0;i<e.menuItems.length;i++){var c=e.menuItems[i];c.isChecked=c.type==o.type,c.isChecked&&(a.showNormal=!0)}for(var C=0;C<e.defaultItems.length;C++){var r=e.defaultItems[C];r.isChecked=r.type==o.type}}else"contract"==t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).go?(s(),a.isContractChecked=!0,a.showSpecial=!0):"train"==t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).go?(s(),a.isTrainChecked=!0,a.showSpecial=!0):"card"==t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).go?(s(),a.isCardChekced=!0,a.showSpecial=!0):"auth"==t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).go?a.showIndex=!1:"moduleList"==t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).go?a.showIndex=!1:e.defaultItems[0].isChecked=!0;else e.defaultItems[0].isChecked=!0;n()}function n(){t.Api.APV.getApvCustomTemplateList().then(function(s){if(t.Log.d("getModuleList"),0==s.code){var o=s.data.apv_custom_template_list;if(e.moduleList=i(o),t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM)&&t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).value){a.showIndex=!0;for(var n=t.Data.get(t.Const.DATA.KEY_SETTING_CLICK_ITEM).value,c=0;c<e.moduleList.length;c++){var C=e.moduleList[c];C.isChecked=C.templateId==n.templateId,C.isChecked&&(a.showModule=!0)}for(var r=0;r<e.defaultItems.length;r++){var g=e.defaultItems[r];g.isChecked=g.type==n.type}a.onClickIndex({item:n})}}})}function i(e){var s=[];for(var o in e){var n={};n.img=c(e[o].avatar),n.title=e[o].name,n.type=t.Const.APP.PROCESS.TYPE_PROCESS_MODULE,n.templateId=e[o].id,n.isChecked=!1,s.push(n)}return s}function c(e){if(t.Log.d(e),e&&0==e.indexOf("default")){var s=parseInt(e.substring(e.indexOf(":")+1,e.length))-1;t.Log.d(s);var o=C[s].img;return o}}var a=this,C=[{img:"process-setting/img/icon-process-reimb.png"},{img:"process-setting/img/icon-process-askforleave.png"},{img:"process-setting/img/icon-process-business-trip.png"},{img:"process-setting/img/icon-process-pay.png"},{img:"process-setting/img/icon-process-card.png"},{img:"process-setting/img/icon-process-imprest.png"},{img:"process-setting/img/icon-process-contract.png"},{img:"home/img/icon-report.png"},{img:"process-setting/img/icon-process-goods.png"},{img:"process-setting/img/icon-process-borrow-stamp.png"},{img:"process-setting/img/icon-process-borrow-car.png"},{img:"process-setting/img/icon-process-train.png"}];e.$state=t.$state,t.on(t.Const.EVENT.EVENT_ORG_CHANGE,function(e,t){o()}),e.clearAllChecked=s,a.showIndex=!1,a.showNormal=!1,a.showModule=!1,a.showSpecial=!1,e.onClickProcessMenu=function(){a.showIndex=!a.showIndex,a.showNormal=!1,a.showModule=!1,a.showSpecial=!1},e.onClickSystemAPv=function(){a.showIndex=!0,a.showNormal=!a.showNormal,a.showModule=!1,a.showSpecial=!1},e.onClickCustomApv=function(){a.showIndex=!0,a.showNormal=!1,a.showModule=!a.showModule,a.showSpecial=!1},e.onClickModule=function(){a.showIndex=!1,a.showNormal=!1,a.showModule=!1,a.showSpecial=!a.showSpecial};var r;t.Api.ORG.getDefaultOrgRoot().then(function(e){r=e.id}),e.onClickAuth=function(){t.Api.ORG.getDefaultOrgRoot().then(function(e){r=e.id,t.Data.set(t.Const.DATA.KEY_SETTING_CLICK_ITEM,{go:"auth"}),t.Log.d(t.Data.getUser()),t.Api.AUTH.getAuth(r,t.Data.getUser().id).then(function(e){t.Log.d("getAuth"),t.Log.d(e),0==e.code&&(e.data.auth["oa.all"]?t.go("setting.auth"):t.Notify.info("权限不足"))},function(e){a.isOpen=!1})})},e.onClickModuleList=function(){t.Data.set(t.Const.DATA.KEY_SETTING_CLICK_ITEM,{go:"moduleList"})},e.onClickCard=function(){t.Data.set(t.Const.DATA.KEY_SETTING_CLICK_ITEM,{go:"card"})},e.onClickMenu=function(o,n){if(s(),t.Data.set(t.Const.DATA.KEY_SETTING_CLICK_ITEM,{go:"index",value:o}),e.$state.includes("setting.index")){for(var i=0;i<e.menuItems.length;i++){var c=e.menuItems[i];c.isChecked=c.type==o.type}for(var C=0;C<e.moduleList.length;C++){var r=e.moduleList[C];r.isChecked=r.templateId==o.templateId}for(var g=0;g<e.defaultItems.length;g++){var p=e.defaultItems[g];p.isChecked=p.type==o.type}a.onClickIndex({item:o})}else e.$state.go("setting.index");e.showModule=!1,e.showNormal=!1},e.onClickContract=function(){s(),t.Data.set(t.Const.DATA.KEY_SETTING_CLICK_ITEM,{go:"contract"}),a.isContractChecked=!0,e.$state.includes("setting.module")?a.onClickContract():e.$state.go("setting.module")},e.onClickTrain=function(){s(),t.Data.set(t.Const.DATA.KEY_SETTING_CLICK_ITEM,{go:"train"}),a.isTrainChecked=!0,e.$state.includes("setting.module")?a.onClickTrain():e.$state.go("setting.module")},e.menuItems=[{icon:"process-setting/img/icon-report.png",title:"报告",type:t.Const.APP.PROCESS.TYPE_PROCESS_REPORT,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-reimb.png",title:"报销",type:t.Const.APP.PROCESS.TYPE_PROCESS_FIN_REIMB,templateId:"",isChecked:!1},{icon:"asset/core/component/message-scroll/img/icon-message-trip-reimb.png",title:"差旅费",type:t.Const.APP.PROCESS.TYPE_PROCESS_FIN_TRIP_REIMB,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-pay.png",title:"付款",type:t.Const.APP.PROCESS.TYPE_PROCESS_FIN_PAY,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-imprest.png",title:"备用金申请",type:t.Const.APP.PROCESS.TYPE_PROCESS_FIN_FUND,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-askforleave.png",title:"请假",type:t.Const.APP.PROCESS.TYPE_PROCESS_ADMIN_LEAVE,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-business-trip.png",title:"外勤",type:t.Const.APP.PROCESS.TYPE_PROCESS_WORK_BUSINESS,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-goods.png",title:"物品申领",type:t.Const.APP.PROCESS.TYPE_PROCESS_ADMIN_RES_GOODS,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-card.png",title:"名片制作",type:t.Const.APP.PROCESS.TYPE_PROCESS_CARD,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-train.png",title:"培训",type:t.Const.APP.PROCESS.TYPE_PROCESS_TRAIN,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-contract.png",title:"合同",type:t.Const.APP.PROCESS.TYPE_PROCESS_CONTRACT,isChecked:!1},{icon:"process-setting/img/icon-process-borrow-stamp.png",title:"用印申请",type:t.Const.APP.PROCESS.TYPE_PROCESS_ADMIN_RES_STAMP,templateId:"",isChecked:!1},{icon:"process-setting/img/icon-process-borrow-car.png",title:"用车审批",type:t.Const.APP.PROCESS.TYPE_PROCESS_ADMIN_RES_CAR,templateId:"",isChecked:!1}],e.defaultItems=[{icon:"process-setting/img/icon-process-default.png",title:"默认",type:t.Const.APP.PROCESS.TYPE_PROCESS_DEFAULT,isChecked:!1}],o()}angular.module("app.core.component").component("settingBar",{templateUrl:"core/setting-bar/setting-bar.html",controller:e,controllerAs:"context",bindings:{onClickIndex:"&",onClickContract:"&",onClickTrain:"&"}}),e.$inject=["$scope","Core"]}();
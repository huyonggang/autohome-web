angular.module("templates").run(["$templateCache",function(i){i.put("core/navigation/search-bar.html",'<div class="component-search-bar">\n    <div class="status-search" ng-show="isShowSearchBar">\n        <div class="title m-default">状态筛选</div>\n        <div class="status-line m-default"></div>\n        <div class="status m-link" ng-click="isShow=!isShow">{{status}}</div>\n        <img class="triangle m-link" ng-click="isShow=!isShow" src="asset/core/component/search-bar/img/icon-triangle.png">\n    </div>\n    <datepicker ng-show="isShowSearchBar" class="data-picker" style="margin-left: 5px" date-format="yyyy-MM-dd" >\n        <input class="data-picker-input" ng-model="dateBegin" placeholder="点击选择时间" type="text"/> -\n    </datepicker>\n    <datepicker ng-show="isShowSearchBar" class="data-picker" style="margin-left: 117px" date-format="yyyy-MM-dd">\n        <input class="data-picker-input" ng-model="dateEnd" placeholder="点击选择时间" date-min-limit="dateBegin" type="text"/>\n    </datepicker>\n    <input ng-show="isShowSearchBar" class="name-input" ng-model="name" placeholder="申请人姓名" type="text"/>\n    <div ng-show="isShowSearchBar" class="search-btn m-link" ng-click="onClickSearch()">搜索</div>\n    <div class="exit m-link" ng-class="{true:\'exitShow\',false:\'exitHide\'}[isShow]" ng-mouseleave="isShow=false" ng-init="isShow=false">\n        <div ng-if="isShow" class="status" ng-click="changeStatus(\'全部\')">全部</div>\n        <div ng-if="isShow" class="status" ng-click="changeStatus(\'待审批\')">待审批</div>\n        <div ng-if="isShow" class="status" ng-click="changeStatus(\'已审批\')">已完成</div>\n        <div ng-if="isShow" class="status" ng-click="changeStatus(\'审批未通过\')">审批未通过</div>\n    </div>\n    <a ng-show="isShowExport" href="{{context.exportUrl}}" target="_blank" class="export m-link" ng-click="onClickExport();">导出数据</a>\n    <div class="statistics m-link" ng-click="context.onClickData()">统计</div>\n    <div class="line"></div>\n    <div class="table-btn m-link" ng-click="context.onClickTable()">列表</div>\n    <div class="goods-line" ng-show="$state.includes(\'administration.goods\')"></div>\n    <div class="goods m-link" ng-show="$state.includes(\'administration.goods\')" ng-click="context.onClickGoods()">库存管理</div>\n</div>')}]);
!function(){function e(e,t,a){function n(){(a.includes("work.journal")||a.includes("work.index"))&&(e.isShowSearchBar=!1,e.isShowExport=!1)}function i(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}var o=this;e.status="请选择状态",e.isShowSearchBar=!0,e.isShowExport=!0,e.$state=t.$state,e.changeStatus=function(t){e.status=t,e.isShow=!1};var s,r,d={};n(),t.on(t.Const.EVENT.KEY_CLEAR_SEARCH_DATA,function(t){e.status="请选择状态",e.dateBegin="",e.dateEnd="",e.name=""}),t.Api.ORG.getDefaultOrgRoot().then(function(e){s=e.id}),t.Api.LOCAL.getLocalUser().then(function(e){r=e.id}),e.onClickSearch=function(){var a,n,s,r;if(a="请选择状态"==e.status?"":e.status,!e.dateBegin&&e.dateEnd)return void t.Notify.info("请选择开始时间");if(!e.dateEnd&&e.dateBegin)return void t.Notify.info("请选择结束时间");if(e.dateBegin||e.dateEnd){if(!(e.dateBegin<=e.dateEnd))return void t.Notify.info("开始时间不能小于结束时间");n=t.Util.getTimestamp(i(e.dateBegin)),s=t.Util.getTimestamp(i(e.dateEnd))}else n=0,s=0;if(r=e.name?e.name:"",!(a||n||s||r))return void t.Notify.info("请选择条件");var c={name:r,beginTime:n,endTime:s,status:a};d=c,o.onClickSearch({message:c})},e.onClickExport=function(){switch(t.Log.d(o.type),t.Log.d(o.page),t.Log.d(o.templateId),e.status){case"请选择状态":o.status="";break;case"全部":o.status="";break;case"待审批":o.status=1;break;case"已审批":o.status=2;break;case"审批未通过":o.status=-1;break;default:o.status=""}d.beginTime||(d.beginTime=""),d.endTime||(d.endTime=""),d.name||(d.name="");var a={org_root_id:s,user_id:r,type:o.type,status:o.status,page:o.page,template_id:o.templateId,begin_time:d.beginTime,end_time:d.endTime,name:d.name};t.Log.d(t.Data.getExportUrl(a)),o.exportUrl=t.Data.getExportUrl(a)}}angular.module("app.core.component").component("searchBar",{templateUrl:"core/search-bar/search-bar.html",controller:e,controllerAs:"context",bindings:{onClickSearch:"&",onClickExport:"&",onClickData:"&",onClickTable:"&",type:"=",page:"=",templateId:"=",onClickGoods:"&"}}),e.$inject=["$scope","Core","$state"]}();